var deviceManager = require("smartkitchens/entities/devicemanager")

var utils = require("smartkitchens/entities/utils");
var log = require("log");

log.setLevel("INFO");


var query = {};
if(request.body != null){
	query = request.body;
}else if(request.parameters.body){
	query = request.parameters.body;
} else {
  query = request.parameters;
}

if(typeof query == 'string'){
  	try{
    	query = JSON.parse(query);   
    }catch(e){
      	return "INVALID OR MISSING PARAMETER";
    }
}

var devices = deviceManager.getDeviceAlertsEntries(query.id);
return devices;